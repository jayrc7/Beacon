<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <link rel="shortcut icon" href="%PUBLIC_URL%/favicon.ico">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="theme-color" content="#000000">
    <!--
      manifest.json provides metadata used when your web app is added to the
      homescreen on Android. See https://developers.google.com/web/fundamentals/engage-and-retain/web-app-manifest/
    -->
    <link rel="manifest" href="%PUBLIC_URL%/manifest.json">
    <!--
      Notice the use of %PUBLIC_URL% in the tags above.
      It will be replaced with the URL of the `public` folder during the build.
      Only files inside the `public` folder can be referenced from the HTML.
      Unlike "/favicon.ico" or "favicon.ico", "%PUBLIC_URL%/favicon.ico" will
      work correctly both with client-side routing and a non-root public URL.
      Learn how to configure a non-root public URL by running `npm run build`.
    -->
    <title>React App</title>

    <script type="text/javascript" src="https://js.api.here.com/v3/3.0/mapsjs-core.js"></script>
    <script type="text/javascript" src="https://js.api.here.com/v3/3.0/mapsjs-service.js"></script>
    <script type="text/javascript" src="https://js.api.here.com/v3/3.0/mapsjs-ui.js"></script>
    <script type="text/javascript" src="https://js.api.here.com/v3/3.0/mapsjs-mapevents.js"></script>

  </head>

  <body onload="getLocation()" style="margin: 40px">
    <div id="root"> </div>


      <div id="userInput" style="margin-top: 150px; float: left; background-color: lightblue; height:400px; width: 23%">
        <div id = "inputBoxes">
          <form>
          Name: <br>
          <input type = "text" name ="name">
          <br><br>
          Event: <br>
          <input type = "text" name = "event">
          <br><br>
          Event type: <br>
          <style>
.dropbtn {
    background-color: #3498DB;
    color: white;
    padding: 16px;
    font-size: 16px;
    border: none;
    cursor: pointer;
}

.dropbtn:hover, .dropbtn:focus {
    background-color: #2980B9;
}

.dropdown {
    position: relative;
    display: inline-block;
}

.dropdown-content {
    display: none;
    position: absolute;
    background-color: #f1f1f1;
    min-width: 160px;
    overflow: auto;
    box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.2);
    z-index: 1;
}

.dropdown-content a {
    color: black;
    padding: 12px 16px;
    text-decoration: none;
    display: block;
}

.dropdown a:hover {background-color: #ddd;}

.show {display: block;}
</style>
</head>
<body>


<div class="dropdown">
<button onclick="myFunction()" class="dropbtn">Dropdown</button>
  <div id="myDropdown" class="dropdown-content">
    <a href="#home">Home</a>
    <a href="#about">About</a>
    <a href="#contact">Contact</a>
  </div>
  <br><br>
</div>

<script>
/* When the user clicks on the button,
toggle between hiding and showing the dropdown content */
function myFunction() {
    document.getElementById("myDropdown").classList.toggle("show");
}

// Close the dropdown if the user clicks outside of it
window.onclick = function(event) {
  if (!event.target.matches('.dropbtn')) {

    var dropdowns = document.getElementsByClassName("dropdown-content");
    var i;
    for (i = 0; i < dropdowns.length; i++) {
      var openDropdown = dropdowns[i];
      if (openDropdown.classList.contains('show')) {
        openDropdown.classList.remove('show');
      }
    }
  }
}
</script>
      </form>
      <button type = "button">Pin me!
          </div>
        </div>
    <div id="map" style=" float: right; left: 475px; width: 75%; height: 800px; background: grey" />

<script  type="text/javascript" charset="UTF-8" >

        /**
        * Moves the map to display over Berlin
        *
        * @param  {H.Map} map      A HERE Map instance within the application
        */
        function moveMapToBerlin(map){

            map.setCenter({lat:32.8801, lng:-117.2340});
            map.setZoom(14);

        }



        function setUpClickListener(map) {
        // Attach an event listener to map display
        // obtain the coordinates and display in an alert box.
        map.addEventListener('tap', function (evt) {
        var coord = map.screenToGeo(evt.currentPointer.viewportX,
            evt.currentPointer.viewportY);
        //alert('Clicked at ' + Math.abs(coord.lat.toFixed(4)) +
        //((coord.lat > 0) ? 'N' : 'S') +
        //' ' + Math.abs(coord.lng.toFixed(4)) +
         //((coord.lng > 0) ? 'E' : 'W'));

         addDomMarker(map, coord.lat.toFixed(4), coord.lng.toFixed(4));



        });

        }

        function addDomMarker(map, lati, lon) {
            var outerElement = document.createElement('div'),
            innerElement = document.createElement('div');

            outerElement.style.userSelect = 'none';
            outerElement.style.webkitUserSelect = 'none';
            outerElement.style.msUserSelect = 'none';
            outerElement.style.mozUserSelect = 'none';
            outerElement.style.cursor = 'default';

            innerElement.style.color = 'red';
            innerElement.style.backgroundColor = 'blue';
            innerElement.style.border = '2px solid black';
            innerElement.style.font = 'normal 12px arial';
            innerElement.style.lineHeight = '12px'

            innerElement.style.paddingTop = '2px';
            innerElement.style.paddingLeft = '4px';
            innerElement.style.width = '20px';
            innerElement.style.height = '20px';

            // add negative margin to inner element
            // to move the anchor to center of the div
            innerElement.style.marginTop = '-10px';
            innerElement.style.marginLeft = '-10px';

            outerElement.appendChild(innerElement);

            // Add text to the DOM element
            innerElement.innerHTML = 'C';

            function changeOpacity(evt) {
                evt.target.style.opacity = 0.6;
            };

            function changeOpacityToOne(evt) {
                evt.target.style.opacity = 1;
            };

            //create dom icon and add/remove opacity listeners
            var domIcon = new H.map.DomIcon(outerElement, {
            // the function is called every time marker enters the viewport
            onAttach: function(clonedElement, domIcon, domMarker) {
                clonedElement.addEventListener('mouseover', changeOpacity);
                clonedElement.addEventListener('mouseout', changeOpacityToOne);
            },
            // the function is called every time marker leaves the viewport
            onDetach: function(clonedElement, domIcon, domMarker) {
            clonedElement.removeEventListener('mouseover', changeOpacity);
            clonedElement.removeEventListener('mouseout', changeOpacityToOne);
            }
            });

            var newMarker = new H.map.DomMarker({lat:lati, lng:lon},{
                icon: domIcon
            });

            map.addObject(newMarker);
            }



        /**
        * Boilerplate map initialization code starts below:
        */

        //Step 1: initialize communication with the platform
        var platform = new H.service.Platform({
            app_id: 'hM6QGhSurmnxc8i69ynP',
            app_code: 'GoO9Ti5ehS-nrEQQcm-KGQ',
            useHTTPS: true
        });
        var pixelRatio = window.devicePixelRatio || 1;
        var defaultLayers = platform.createDefaultLayers({
            tileSize: pixelRatio === 1 ? 256 : 512,
            ppi: pixelRatio === 1 ? undefined : 320
        });

        //Step 2: initialize a map  - not specificing a location will give a whole world view.
        var map = new H.Map(document.getElementById('map'),
        defaultLayers.normal.map, {pixelRatio: pixelRatio});

        //Step 3: make the map interactive
        // MapEvents enables the event system
        // Behavior implements default interactions for pan/zoom (also on mobile touch environments)
        var behavior = new H.mapevents.Behavior(new H.mapevents.MapEvents(map));

        // Create the default UI components
        var ui = H.ui.UI.createDefault(map, defaultLayers);

        // Now use the map as required...
        moveMapToBerlin(map);
        setUpClickListener(map);
        addDomMarker(map);

        </script>

        </script>
        <script>
          $.ajax({
            url: "https://pos.api.here.com/positioning/v1/locate?app_id=hM6QGhSurmnxc8i69ynP&app_code=GoO9Ti5ehS-nrEQQcm-KGQ",
            beforeSend: function(xhr) {
              xhr.setRequestHeader("Content-Type=application/json")
            },
            type: 'POST',
            dataType: 'json',
            contentType: 'application/json',
            processData: false,
            data: '{"wcdma": [{"mcc": 262, "mnc": 7, "cid": 14674663, "nmr": [{ "uarfcndl": 10786, "psc": 149}, { "uarfcndl": 10762, "psc": 211}]}]}',

            success: function(data) {
              map.setCenter({lat:data.location.lat, lng:data.location.lng});
            },
            error: function() {
              console.log("AHHH");
            }
            });
          </script>


  </body>
</html>
